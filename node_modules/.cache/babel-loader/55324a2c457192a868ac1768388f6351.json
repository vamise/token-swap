{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/mikovainio/FyFy/token-swap/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createFarmHarvestRewardInstruction = exports.createFarmRevertTokensInstruction = exports.createFarmConvertTokensInstruction = exports.createInitUserFarmInstruction = void 0;\n\nvar __1 = require(\"../..\");\n\nvar createInitUserFarmInstruction = function createInitUserFarmInstruction(farm, userFarmPublicKey, owner) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var initUserFarmIx;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!farm.isUserFarmInitialized()) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", __1.emptyInstruction);\n\n          case 2:\n            initUserFarmIx = farm.constructInitUserFarmIx(owner.publicKey, userFarmPublicKey);\n            return _context.abrupt(\"return\", {\n              instructions: [initUserFarmIx],\n              cleanupInstructions: [],\n              signers: owner.signer ? [owner.signer] : []\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n};\n\nexports.createInitUserFarmInstruction = createInitUserFarmInstruction;\n\nvar createFarmConvertTokensInstruction = function createFarmConvertTokensInstruction(farm, userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, userFarmPublicKey, owner) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var convertIx;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!farm.userFarm) {\n              convertIx = farm.constructConvertTokensIx(userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, userFarmPublicKey, owner.publicKey);\n            } else {\n              convertIx = farm.constructConvertTokensIx(userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount);\n            }\n\n            if (convertIx) {\n              _context2.next = 3;\n              break;\n            }\n\n            throw new Error(\"constructConvertTokensIx returned null\");\n\n          case 3:\n            return _context2.abrupt(\"return\", {\n              instructions: [convertIx],\n              cleanupInstructions: [],\n              signers: owner.signer ? [owner.signer] : []\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nexports.createFarmConvertTokensInstruction = createFarmConvertTokensInstruction;\n\nvar createFarmRevertTokensInstruction = function createFarmRevertTokensInstruction(farm, userBurnAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, owner) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var revertIx;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            revertIx = farm.constructRevertTokensIx(userBurnAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount);\n\n            if (revertIx) {\n              _context3.next = 3;\n              break;\n            }\n\n            throw new Error(\"constructRevertTokensIx returned null\");\n\n          case 3:\n            return _context3.abrupt(\"return\", {\n              instructions: [revertIx],\n              cleanupInstructions: [],\n              signers: owner.signer ? [owner.signer] : []\n            });\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\n\nexports.createFarmRevertTokensInstruction = createFarmRevertTokensInstruction;\n\nvar createFarmHarvestRewardInstruction = function createFarmHarvestRewardInstruction(farm, userRewardTokenPublicKey, owner) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var harvestIx;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            harvestIx = farm.constructHarvestIx(userRewardTokenPublicKey);\n            return _context4.abrupt(\"return\", {\n              instructions: [harvestIx],\n              cleanupInstructions: [],\n              signers: owner.signer ? [owner.signer] : []\n            });\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};\n\nexports.createFarmHarvestRewardInstruction = createFarmHarvestRewardInstruction;","map":{"version":3,"sources":["/Users/mikovainio/FyFy/token-swap/node_modules/@orca-so/sdk/dist/public/utils/web3/instructions/farm-instructions.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","createFarmHarvestRewardInstruction","createFarmRevertTokensInstruction","createFarmConvertTokensInstruction","createInitUserFarmInstruction","__1","require","farm","userFarmPublicKey","owner","isUserFarmInitialized","emptyInstruction","initUserFarmIx","constructInitUserFarmIx","publicKey","instructions","cleanupInstructions","signers","signer","userTransferAuthorityPublicKey","userBaseTokenPublicKey","userFarmTokenPublicKey","userRewardTokenPublicKey","baseTokenAmount","userFarm","convertIx","constructConvertTokensIx","Error","userBurnAuthorityPublicKey","revertIx","constructRevertTokensIx","harvestIx","constructHarvestIx"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createFarmHarvestRewardInstruction = exports.createFarmRevertTokensInstruction = exports.createFarmConvertTokensInstruction = exports.createInitUserFarmInstruction = void 0;\nconst __1 = require(\"../..\");\nconst createInitUserFarmInstruction = (farm, userFarmPublicKey, owner) => __awaiter(void 0, void 0, void 0, function* () {\n    if (farm.isUserFarmInitialized()) {\n        return __1.emptyInstruction;\n    }\n    const initUserFarmIx = farm.constructInitUserFarmIx(owner.publicKey, userFarmPublicKey);\n    return {\n        instructions: [initUserFarmIx],\n        cleanupInstructions: [],\n        signers: owner.signer ? [owner.signer] : [],\n    };\n});\nexports.createInitUserFarmInstruction = createInitUserFarmInstruction;\nconst createFarmConvertTokensInstruction = (farm, userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, userFarmPublicKey, owner) => __awaiter(void 0, void 0, void 0, function* () {\n    let convertIx;\n    if (!farm.userFarm) {\n        convertIx = farm.constructConvertTokensIx(userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, userFarmPublicKey, owner.publicKey);\n    }\n    else {\n        convertIx = farm.constructConvertTokensIx(userTransferAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount);\n    }\n    if (!convertIx) {\n        throw new Error(\"constructConvertTokensIx returned null\");\n    }\n    return {\n        instructions: [convertIx],\n        cleanupInstructions: [],\n        signers: owner.signer ? [owner.signer] : [],\n    };\n});\nexports.createFarmConvertTokensInstruction = createFarmConvertTokensInstruction;\nconst createFarmRevertTokensInstruction = (farm, userBurnAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount, owner) => __awaiter(void 0, void 0, void 0, function* () {\n    const revertIx = farm.constructRevertTokensIx(userBurnAuthorityPublicKey, userBaseTokenPublicKey, userFarmTokenPublicKey, userRewardTokenPublicKey, baseTokenAmount);\n    if (!revertIx) {\n        throw new Error(\"constructRevertTokensIx returned null\");\n    }\n    return {\n        instructions: [revertIx],\n        cleanupInstructions: [],\n        signers: owner.signer ? [owner.signer] : [],\n    };\n});\nexports.createFarmRevertTokensInstruction = createFarmRevertTokensInstruction;\nconst createFarmHarvestRewardInstruction = (farm, userRewardTokenPublicKey, owner) => __awaiter(void 0, void 0, void 0, function* () {\n    const harvestIx = farm.constructHarvestIx(userRewardTokenPublicKey);\n    return {\n        instructions: [harvestIx],\n        cleanupInstructions: [],\n        signers: owner.signer ? [owner.signer] : [],\n    };\n});\nexports.createFarmHarvestRewardInstruction = createFarmHarvestRewardInstruction;\n"]},"metadata":{},"sourceType":"script"}