{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/mikovainio/FyFy/token-swap/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar _classCallCheck = require(\"/Users/mikovainio/FyFy/token-swap/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/mikovainio/FyFy/token-swap/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getGlobalFarmAddress = exports.getAuthorityAndNonce = void 0;\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar instructions_1 = require(\"../instructions\");\n\nvar GlobalFarm = /*#__PURE__*/function () {\n  function GlobalFarm(params) {\n    _classCallCheck(this, GlobalFarm);\n\n    this.publicKey = params.publicKey;\n    this.isInitialized = params.isInitialized;\n    this.tokenProgramId = params.publicKey;\n    this.authority = params.authority;\n    this.nonce = params.nonce;\n    this.emissionsAuthority = params.emissionsAuthority;\n    this.removeRewardsAuthority = params.removeRewardsAuthority;\n    this.baseTokenMint = params.baseTokenMint;\n    this.baseTokenVault = params.baseTokenVault;\n    this.rewardTokenVault = params.rewardTokenVault;\n    this.farmTokenMint = params.farmTokenMint;\n    this.emissionsPerSecondNumerator = params.emissionsPerSecondNumerator;\n    this.emissionsPerSecondDenominator = params.emissionsPerSecondDenominator;\n    this.lastUpdatedTimestamp = params.lastUpdatedTimestamp;\n    this.cumulativeEmissionsPerFarmToken = params.cumulativeEmissionsPerFarmToken;\n  }\n\n  _createClass(GlobalFarm, [{\n    key: \"constructSetEmissionsPerSecondIx\",\n    value: function constructSetEmissionsPerSecondIx(numerator, denominator, programId) {\n      return instructions_1.constructSetEmissionsPerSecondIx(this.emissionsAuthority, this.publicKey, this.baseTokenVault, programId, numerator, denominator);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify({\n        publicKey: this.publicKey.toBase58(),\n        isInitialized: this.isInitialized,\n        authority: this.authority.toBase58(),\n        nonce: this.nonce,\n        tokenProgramId: this.tokenProgramId.toBase58(),\n        emissionsAuthority: this.emissionsAuthority.toBase58(),\n        removeRewardsAuthority: this.removeRewardsAuthority.toBase58(),\n        baseTokenMint: this.baseTokenMint.toBase58(),\n        baseTokenVault: this.baseTokenVault.toBase58(),\n        rewardTokenVault: this.rewardTokenVault.toBase58(),\n        farmTokenMint: this.farmTokenMint.toBase58(),\n        emissionsPerSecondNumerator: this.emissionsPerSecondNumerator.toString(),\n        emissionsPerSecondDenominator: this.emissionsPerSecondDenominator.toString(),\n        lastUpdatedTimestamp: this.lastUpdatedTimestamp.toString(),\n        cumulativeEmissionsPerFarmToken: this.cumulativeEmissionsPerFarmToken.toString()\n      }, null, 2);\n    }\n  }]);\n\n  return GlobalFarm;\n}();\n\nexports.default = GlobalFarm;\n/**\n * @returns The PDA used for this Aquafarm instance (generated by using the same\n *  seeds as the smart contract: global farm state pubkey + saved nonce)\n */\n\nfunction getAuthorityAndNonce(publicKey, programId) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", web3_js_1.PublicKey.findProgramAddress([publicKey.toBuffer()], programId));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nexports.getAuthorityAndNonce = getAuthorityAndNonce;\n\nfunction getGlobalFarmAddress(baseTokenMint, rewardTokenMint, funder, tokenProgramId, programId) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", web3_js_1.PublicKey.findProgramAddress([baseTokenMint.toBuffer(), rewardTokenMint.toBuffer(), funder.toBuffer(), tokenProgramId.toBuffer()], programId));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nexports.getGlobalFarmAddress = getGlobalFarmAddress;","map":{"version":3,"sources":["../../src/models/GlobalFarm.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getGlobalFarmAddress = exports.getAuthorityAndNonce = void 0;\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst instructions_1 = require(\"../instructions\");\nclass GlobalFarm {\n    constructor(params) {\n        this.publicKey = params.publicKey;\n        this.isInitialized = params.isInitialized;\n        this.tokenProgramId = params.publicKey;\n        this.authority = params.authority;\n        this.nonce = params.nonce;\n        this.emissionsAuthority = params.emissionsAuthority;\n        this.removeRewardsAuthority = params.removeRewardsAuthority;\n        this.baseTokenMint = params.baseTokenMint;\n        this.baseTokenVault = params.baseTokenVault;\n        this.rewardTokenVault = params.rewardTokenVault;\n        this.farmTokenMint = params.farmTokenMint;\n        this.emissionsPerSecondNumerator = params.emissionsPerSecondNumerator;\n        this.emissionsPerSecondDenominator = params.emissionsPerSecondDenominator;\n        this.lastUpdatedTimestamp = params.lastUpdatedTimestamp;\n        this.cumulativeEmissionsPerFarmToken =\n            params.cumulativeEmissionsPerFarmToken;\n    }\n    constructSetEmissionsPerSecondIx(numerator, denominator, programId) {\n        return instructions_1.constructSetEmissionsPerSecondIx(this.emissionsAuthority, this.publicKey, this.baseTokenVault, programId, numerator, denominator);\n    }\n    toString() {\n        return JSON.stringify({\n            publicKey: this.publicKey.toBase58(),\n            isInitialized: this.isInitialized,\n            authority: this.authority.toBase58(),\n            nonce: this.nonce,\n            tokenProgramId: this.tokenProgramId.toBase58(),\n            emissionsAuthority: this.emissionsAuthority.toBase58(),\n            removeRewardsAuthority: this.removeRewardsAuthority.toBase58(),\n            baseTokenMint: this.baseTokenMint.toBase58(),\n            baseTokenVault: this.baseTokenVault.toBase58(),\n            rewardTokenVault: this.rewardTokenVault.toBase58(),\n            farmTokenMint: this.farmTokenMint.toBase58(),\n            emissionsPerSecondNumerator: this.emissionsPerSecondNumerator.toString(),\n            emissionsPerSecondDenominator: this.emissionsPerSecondDenominator.toString(),\n            lastUpdatedTimestamp: this.lastUpdatedTimestamp.toString(),\n            cumulativeEmissionsPerFarmToken: this.cumulativeEmissionsPerFarmToken.toString(),\n        }, null, 2);\n    }\n}\nexports.default = GlobalFarm;\n/**\n * @returns The PDA used for this Aquafarm instance (generated by using the same\n *  seeds as the smart contract: global farm state pubkey + saved nonce)\n */\nfunction getAuthorityAndNonce(publicKey, programId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return web3_js_1.PublicKey.findProgramAddress([publicKey.toBuffer()], programId);\n    });\n}\nexports.getAuthorityAndNonce = getAuthorityAndNonce;\nfunction getGlobalFarmAddress(baseTokenMint, rewardTokenMint, funder, tokenProgramId, programId) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return web3_js_1.PublicKey.findProgramAddress([\n            baseTokenMint.toBuffer(),\n            rewardTokenMint.toBuffer(),\n            funder.toBuffer(),\n            tokenProgramId.toBuffer(),\n        ], programId);\n    });\n}\nexports.getGlobalFarmAddress = getGlobalFarmAddress;\n//# sourceMappingURL=GlobalFarm.js.map"]},"metadata":{},"sourceType":"script"}